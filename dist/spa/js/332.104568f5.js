"use strict";(self["webpackChunkquasar_single_file_timer"]=self["webpackChunkquasar_single_file_timer"]||[]).push([[332],{5690:(e,t,n)=>{n.d(t,{v:()=>i});var o=n(499),l=n(4376);function i(e="HH:mm:ss"){const t=36e5;function n(e){let t=0;return e=(0,o.SU)(e),t+=1e3*e.getHours()*60*60,t+=1e3*e.getMinutes()*60,t+=1e3*e.getSeconds(),t+=e.getMilliseconds(),t}function i(t){let i=n(l.ZP.extractDate((0,o.SU)(t),(0,o.SU)(e)));return i}function r(n){return l.ZP.formatDate((0,o.SU)(n)-t,(0,o.SU)(e))}function a(e){return r(e)}return{convertDateToMillis:n,convertTimeStrToDuration:i,convertDurationToTimeStr:r,durationFormatted:a}}},3922:(e,t,n)=>{n.d(t,{Y:()=>i});var o=n(7363),l=n(5690);const i=(0,o.Q_)("thetime",{state:()=>({start:Date.now(),running:!1,timer_id:null,duration:1e4,interval:50,format:"HH:mm:ss",now:Date.now(),alarm_running:!1,duration_list:["00:01:00","00:02:00","00:05:00","00:10:00","00:15:00","00:30:00"]}),getters:{end:e=>e.start+e.duration,remaining:e=>{let t=e.duration;return e.running&&(t=e.end-e.now),t},remaining_formatted:e=>{const t=(0,l.v)(e.format);let n=0;return e.running&&(n-=1e3),t.convertDurationToTimeStr(e.remaining-n)},elapsed:e=>e.now-e.start,elapsed_percentage:e=>100*e.elapsed/e.duration},actions:{timetravel(e){this.duration+=1e3*e*60},timer_stop(){this.timer_id&&window.clearInterval(this.timer_id),this.timer_id=null,this.now=this.end+1e3,this.running=!1},timer_update(){this.now=Date.now(),this.running?this.remaining<=this.interval&&(this.timer_stop(),this.alarm_running=!0):this.start=this.now},timer_start(e=null){this.timer_stop(),this.alarm_running=!1,e&&(this.duration=e),this.start=Date.now(),this.timer_update(),this.running=!0,this.timer_id=window.setInterval(this.timer_update,this.interval)}}})},7586:(e,t,n)=>{n.r(t),n.d(t,{default:()=>M});var o=n(9835),l=n(6970);const i=(0,o._)("br",null,null,-1);function r(e,t,n,r,a,s){const u=(0,o.up)("q-btn"),d=(0,o.up)("EssentialNavigation"),m=(0,o.up)("timer-control"),c=(0,o.up)("window-portal"),p=(0,o.up)("q-toggle"),w=(0,o.up)("q-item-section"),h=(0,o.up)("q-item"),f=(0,o.up)("q-item-label"),g=(0,o.up)("q-list"),v=(0,o.up)("q-drawer"),_=(0,o.up)("router-view"),S=(0,o.up)("q-page-container"),b=(0,o.up)("q-layout");return(0,o.wg)(),(0,o.j4)(b,{view:"lHh Lpr lFf"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:e.toggleLeftDrawer,class:"fixed-top q-ma-sm",style:{"z-index":"10000"}},null,8,["onClick"]),(0,o.Wm)(v,{modelValue:e.leftDrawerOpen,"onUpdate:modelValue":t[2]||(t[2]=t=>e.leftDrawerOpen=t),"show-if-above":"",bordered:"",elevated:"",persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{class:"q-pt-xl"},{default:(0,o.w5)((()=>[(0,o.Wm)(d),(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m),(0,o.Wm)(c,{open:e.windowPortalOpen,onClose:t[0]||(t[0]=t=>e.windowPortalOpen=!1),style:{"font-size":"1.5em"},class:"q-dark q-pt-xl"},{default:(0,o.w5)((()=>[(0,o.Wm)(m)])),_:1},8,["open"]),(0,o.Wm)(p,{modelValue:e.windowPortalOpen,"onUpdate:modelValue":t[1]||(t[1]=t=>e.windowPortalOpen=t),label:"control window"},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(f,{header:"",class:"fixed-bottom"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.appinfo.productName)+" v"+(0,l.zw)(e.appinfo.version)+" ",1),i,(0,o.Uk)(" Quasar v"+(0,l.zw)(e.$q.version),1)])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(S,null,{default:(0,o.w5)((()=>[(0,o.Wm)(_)])),_:1})])),_:1})}var a=n(499),s=n(7128);function u(e,t,n,i,r,a){const s=(0,o.up)("q-icon"),u=(0,o.up)("q-item-section"),d=(0,o.up)("q-item-label"),m=(0,o.up)("q-item");return(0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.childrenCommon,(e=>((0,o.wg)(),(0,o.j4)(m,{key:e.title,to:e.path,exact:""},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{name:e.icon},null,8,["name"])])),_:2},1024),(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.title),1)])),_:2},1024),(0,o.Wm)(d,{caption:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.caption),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["to"])))),128)}var d=n(117);const m={name:"EssentialNavigation",data(){return{childrenCommon:d.Z}}};var c=n(1639),p=n(490),w=n(1233),h=n(2857),f=n(3115),g=n(9984),v=n.n(g);const _=(0,c.Z)(m,[["render",u]]),S=_;v()(m,"components",{QItem:p.Z,QItemSection:w.Z,QIcon:h.Z,QItemLabel:f.Z});var b=n(1957);const U={ref:"root",class:"window-portal-container"},D={class:"window-portal",ref:"slotchild"};function y(e,t,n,l,i,r){return(0,o.wg)(),(0,o.iD)("div",U,[(0,o.wy)((0,o._)("div",D,[(0,o.WI)(e.$slots,"default")],512),[[b.F8,n.open]])],512)}n(702);const W={name:"WindowPortal",props:{open:{type:Boolean,default:!1},windowName:{type:String,default:""}},data(){return{windowRef:null}},watch:{open(e){e?this.openPortal():this.closePortal()}},methods:{openPortal(){console.group("openPortal"),null==this.windowRef||this.windowRef.closed?(console.log("create new window"),console.log("this.$refs",this.$refs),this.windowRef=window.open("",this.windowName,"popup,width=300,height=700,left=200,top=200"),this.windowRef.addEventListener("beforeunload",this.portalBeforeunload),console.log("attach 'slotchild' to new window"),this.windowRef.document.body.appendChild(this.$refs.slotchild),this.copyStyles()):this.windowRef.focus(),console.groupEnd()},portalBeforeunload(){console.group("portalBeforeunload"),this.$refs.slotchild.parentElement!=this.$refs.root?(console.log("reattach 'slotchild' to main window"),this.$refs.root.appendChild(this.$refs.slotchild),this.$emit("close")):console.log("closeing triggerd from main window..."),console.groupEnd()},closePortal(){console.group("closePortal"),null!=this.windowRef&&0==this.windowRef.closed?(console.log("closing.."),this.windowRef.close(),this.windowRef=null,this.$emit("close")):console.log("no window availabe for closing."),console.groupEnd()},pagehideEvent(e){console.log("pagehide"),this.closePortal()},copyStyles(){console.log("copyStyles...");const e=document.styleSheets;let t=0;const n=this.windowRef.document.styleSheets;for(let o=0;o<e.length;o++){const n=e[o],l=document.createElement("style");l.type="text/css",this.windowRef.document.head.appendChild(l);const i=l.sheet;for(const e of n.rules)i.insertRule(e.cssText),t++}console.log(`copied ${n.length} sheets with total of ${t} rules`);for(const o of document.body.classList)this.windowRef.document.body.classList.add(o)}},mounted(){this.open&&this.openPortal(),addEventListener("pagehide",this.pagehideEvent)},beforeUnmount(){console.log("beforeUnmount"),this.closePortal(),removeEventListener("pagehide",this.pagehideEvent)}},q=(0,c.Z)(W,[["render",y]]),Z=q;var T=n(5690),k=n(3922);n(6727);const P={props:{modelValue:Number,format:{type:String,default:"HH:mm:ss"}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,l=(0,a.iH)("[0-9]{2}:[0-9]{2}:[0-9]{2}"),i=(0,a.iH)(1),r=(0,k.Y)(),s=(0,T.v)(r.format),u=(0,o.Fl)((()=>s.convertDurationToTimeStr(n.modelValue))),d=e=>{t("update:modelValue",s.convertTimeStrToDuration(e))};return(0,o.YP)((()=>n.format),((e,t)=>{e.includes(":ss")?(l="[0-9]{2}:[0-9]{2}:[0-9]{2}",i=1):(l="[0-9]{2}:[0-9]{2}",i=60)})),(e,t)=>{const n=(0,o.up)("q-input");return(0,o.wg)(),(0,o.j4)(n,{"model-value":(0,a.SU)(u),"onUpdate:modelValue":t[0]||(t[0]=e=>d(e)),type:"time",step:i.value,pattern:l.value},null,8,["model-value","step","pattern"])}}};var C=n(928);const Q=P,R=Q;v()(P,"components",{QInput:C.Z});const $=(0,o._)("h5",null," timer ",-1),E=(0,o._)("h5",null," timetravel ",-1),H={props:{},setup(e){const t=(0,k.Y)(),n=(0,T.v)(t.format),i=((0,o.Fl)((()=>{let e=0;return t.running&&(e+=1e3),n.convertDurationToTimeStr(t.remaining-e)})),()=>{t.duration_list.push(n.convertDurationToTimeStr(t.duration))});return(e,r)=>{const s=(0,o.up)("q-btn");return(0,o.wg)(),(0,o.iD)("section",null,[(0,o._)("section",null,[$,(0,o._)("h6",null,(0,l.zw)((0,a.SU)(t).remaining_formatted),1)]),(0,o._)("section",null,[(0,o._)("ul",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,a.SU)(t).duration_list,(e=>((0,o.wg)(),(0,o.iD)("li",{key:e},[(0,o.Wm)(s,{label:e,outlined:"",onClick:o=>(0,a.SU)(t).timer_start((0,a.SU)(n).convertTimeStrToDuration(e))},null,8,["label","onClick"])])))),128))])]),(0,o._)("section",null,[(0,o.Wm)((0,a.SU)(R),{modelValue:(0,a.SU)(t).duration,"onUpdate:modelValue":r[0]||(r[0]=e=>(0,a.SU)(t).duration=e),outlined:"",onKeyup:[r[1]||(r[1]=(0,b.D2)((e=>(0,a.SU)(t).timer_start()),["enter"])),r[2]||(r[2]=e=>(0,a.SU)(t).timer_update())]},null,8,["modelValue"]),(0,o.Wm)(s,{label:"start",outlined:"",onClick:r[3]||(r[3]=e=>(0,a.SU)(t).timer_start())}),(0,o.Wm)(s,{label:"add",outlined:"",onClick:r[4]||(r[4]=e=>i())})]),(0,o._)("section",null,[E,(0,o.Wm)(s,{label:"-1min",outlined:"",onClick:r[5]||(r[5]=e=>(0,a.SU)(t).timetravel(-1))}),(0,o.Wm)(s,{label:"+1min",outlined:"",onClick:r[6]||(r[6]=e=>(0,a.SU)(t).timetravel(1))})])])}}};var V=n(7065);const L=H,I=L;v()(H,"components",{QBtn:V.Z});const O=(0,o.aZ)({name:"MainLayout",components:{EssentialNavigation:S,TimerControl:I,WindowPortal:Z},setup(){const e=(0,a.iH)(!1);console.log(`leftDrawerOpen: ${e.value}`);const t=(0,a.iH)(!1);return{leftDrawerOpen:e,toggleLeftDrawer(){e.value=!e.value,console.log(`leftDrawerOpen: ${e.value}`)},appinfo:s,windowPortalOpen:t}}});var x=n(1967),N=n(8673),z=n(3246),B=n(592),Y=n(2133);const F=(0,c.Z)(O,[["render",r]]),M=F;v()(O,"components",{QLayout:x.Z,QBtn:V.Z,QDrawer:N.Z,QList:z.Z,QItem:p.Z,QItemSection:w.Z,QToggle:B.Z,QItemLabel:f.Z,QPageContainer:Y.Z})},7128:e=>{e.exports=JSON.parse('{"name":"quasar-single-file-timer","version":"4.0.0","productName":"SimpleCountdownTimer ","description":"very simple countdown / timer single-file inlined/packed quasar app","projectUrl":"https://github.com/s-light/quasar_single_file_timer","previewUrl":"https://s-light.github.io/quasar_single_file_timer/dist/spa/#/"}')}}]);