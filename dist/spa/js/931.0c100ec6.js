(self["webpackChunkquasar_single_file_timer"]=self["webpackChunkquasar_single_file_timer"]||[]).push([[931],{9931:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>x});var r=n(9835),i=n(499),l=n(9302),o=n(7363);const a=(0,o.Q_)("thetime",{state:()=>({timer:{format:"HH:mm:ss",start:Date.now(),end:Date.now()+1e4,running:!1,timer_id:null,duration:1e4,interval:50,now:Date.now()},alarm:{running:!1,remaining:0,timer_id:null,duration:5e3,interval:500}}),getters:{remaining:e=>e.timer.end-e.timer.now,elapsed:e=>e.timer.now-e.timer.start,elapsed_percentage(e){const t=e.timer.now-e.timer.start;let n=100*t/e.timer.duration;return n}},actions:{}});var s=n(4376);function u(e="HH:mm:ss"){function t(e){let t=0;return e=(0,i.SU)(e),t+=1e3*e.getHours()*60*60,t+=1e3*e.getMinutes()*60,t+=1e3*e.getSeconds(),t+=e.getMilliseconds(),t}function n(n){let r=t(s.ZP.extractDate((0,i.SU)(n),(0,i.SU)(e)));return r}function r(t){return s.ZP.formatDate((0,i.SU)(t),(0,i.SU)(e))}return{convertDateToMillis:t,convertTimeStrToDuration:n,durationFormatted:r}}const m={props:{thetime:{type:Object,required:!0}},setup(e){const t=e,n=(0,i.iH)("00:00:10"),l=(0,i.Vh)(t,"thetime"),o=(0,i.SU)(l).timer,a=(0,i.SU)(l).alarm,s=u(o.format),m=()=>{o.timer_id&&window.clearInterval(o.timer_id),o.timer_id=null,o.now=o.end+1e3,o.running=!1},c=()=>{o.now=Date.now(),l.value.remaining<=o.interval&&(console.log("timer_stop"),m(),console.log("run alarm:"),a.running=!0)},d=(e=null)=>{m(),a.running=!1,e&&(o.duration=e),o.start=Date.now(),o.end=Date.now()+o.duration,o.timer_id=window.setInterval(c,o.update_interval),o.running=!0},g=()=>{console.log(`timeNew: ${n.value}`);let e=s.convertTimeStrToDuration(n.value);console.log(`duration: ${e}`),d(e)};let p=(0,i.iH)(["00:00:02","00:00:05","00:01:00","00:05:00","00:10:00","00:15:00","00:30:00"]);return(e,t)=>{const l=(0,r.up)("q-btn"),o=(0,r.up)("q-input");return(0,r.wg)(),(0,r.iD)("section",null,[(0,r._)("ul",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,i.SU)(p),(e=>((0,r.wg)(),(0,r.iD)("li",{key:e},[(0,r.Wm)(l,{label:e,outlined:"",onClick:t=>d((0,i.SU)(s).convertTimeStrToDuration(e))},null,8,["label","onClick"])])))),128))]),(0,r._)("section",null,[(0,r.Wm)(o,{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),outlined:"",type:"time",step:"1",pattern:"[0-9]{2}:[0-9]{2}:[0-9]{2}"},null,8,["modelValue"]),(0,r.Wm)(l,{label:"start",outlined:"",onClick:t[1]||(t[1]=e=>g())}),(0,r.Wm)(l,{label:"add",outlined:"",onClick:t[2]||(t[2]=e=>(0,i.SU)(p).push(n.value))})])])}}};var c=n(7065),d=n(6768),g=n(9984),p=n.n(g);const _=m,w=_;p()(m,"components",{QBtn:c.Z,QInput:d.Z});var v=n(6970),f=n(2987),h=n.n(f);const S={class:"flex flex-center"},k={props:{thetime:{type:Object,required:!0}},setup(e){const t=e,n=(0,i.Vh)(t,"thetime"),o=(0,i.SU)(n).timer,a=(0,i.SU)(n).alarm,s=u(o.format),m=(0,l.Z)(),c=new Audio(h()),d=()=>{m.dark.toggle()},g=()=>{d(),a.remaining-=a.interval,a.remaining<=0&&(_(),a.running=!1)},p=()=>{_(),c.play(),a.color_orig=m.dark.isActive,a.remaining=a.duration,a.timer_id=window.setInterval(g,a.interval)},_=()=>{a.timer_id&&(window.clearInterval(a.timer_id),a.timer_id=null,m.dark.set(a.color_orig))};(0,r.YP)((()=>a.running),((e,t)=>{console.log("watch: alarm.running",t,"â†’",e),0==t&&1==e?p():1==t&&0==e&&_()}));const w=(0,r.Fl)((()=>s.durationFormatted(n.value.remaining-36e5+1e3)));return(e,t)=>{const l=(0,r.up)("q-circular-progress");return(0,r.wg)(),(0,r.iD)("section",S,[(0,r.Wm)(l,{value:(0,i.SU)(n).elapsed_percentage,size:"99vh",thickness:1,"animation-speed":0,color:"blue","track-color":"dark","show-value":"","font-size":"20vh",style:{overflow:"hidden"},"instant-feedback":""},{default:(0,r.w5)((()=>[(0,r.Uk)((0,v.zw)((0,i.SU)(w)),1)])),_:1},8,["value","thickness"])])}}};var U=n(3302);const D=k,b=D;p()(k,"components",{QCircularProgress:U.Z});const q={setup(e){const t=a(),n=(0,l.Z)();return n.dark.set(!0),(e,n)=>{const l=(0,r.up)("q-page");return(0,r.wg)(),(0,r.j4)(l,{class:"flex flex-center content-stretch"},{default:(0,r.w5)((()=>[(0,r.Wm)((0,i.SU)(w),{class:"col-auto self-end qma-sm q-pt-xl",thetime:(0,i.SU)(t)},null,8,["thetime"]),(0,r.Wm)((0,i.SU)(b),{class:"col",thetime:(0,i.SU)(t)},null,8,["thetime"])])),_:1})}}};var H=n(9885);const Z=q,x=Z;p()(q,"components",{QPage:H.Z})},2987:(e,t,n)=>{e.exports=n.p+"media/01__04__s-light__singing_bowl_-_single_strike_4.8defb053.ogg"}}]);